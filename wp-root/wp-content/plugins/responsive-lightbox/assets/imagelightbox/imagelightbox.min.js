!function(n,t,e){"use strict";var i=function(){var n;return""==(n=(n=e.body||e.documentElement).style).WebkitTransition?"-webkit-":""==n.MozTransition?"-moz-":""==n.OTransition?"-o-":""==n.transition&&""},o=!1!==i(),r=function(n){return!!(t.RLG&&t.RLG.sanitizeConfig&&t.RLG.sanitizeConfig.ALLOWED_URI_REGEXP)&&t.RLG.sanitizeConfig.ALLOWED_URI_REGEXP.test(n)},a=function(n,t,e){var o={},r=i();o[r+"transform"]="translateX("+t+")",o[r+"transition"]=r+"transform "+e+"s linear",n.css(o)},u="ontouchstart"in t,c=t.navigator.pointerEnabled||t.navigator.msPointerEnabled,f=function(n){if(u)return!0;if(!c||void 0===n||void 0===n.pointerType)return!1;if(void 0!==n.MSPOINTER_TYPE_MOUSE){if(n.MSPOINTER_TYPE_MOUSE!=n.pointerType)return!0}else if("mouse"!=n.pointerType)return!0;return!1};n.fn.imageLightbox=function(i){i=n.extend({selector:'id="imagelightbox"',animationSpeed:250,preloadNext:!0,enableKeyboard:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,onStart:!1,onEnd:!1,onLoadStart:!1,onLoadEnd:!1},i);var l=n([]),d=n(),s=n(),g=0,p=0,h=0,m=!1,v=function(){if(!s.length)return!0;var e=.8*n(t).width(),i=.9*n(t).height(),o=new Image;o.src=s.attr("src"),o.onload=function(){if(g=o.width,p=o.height,g>e||p>i){var r=g/p>e/i?g/e:p/i;g/=r,p/=r}s.css({width:g+"px",height:p+"px",top:(n(t).height()-p)/2+"px",left:(n(t).width()-g)/2+"px"})}},E=function(t){if(m)return!1;if(t=void 0!==t&&("left"==t?1:-1),s.length){if(!1!==t&&(l.length<2||!0===i.quitOnEnd&&(-1===t&&0==l.index(d)||1===t&&l.index(d)==l.length-1)))return L(),!1;var e={opacity:0};o?a(s,100*t-h+"px",i.animationSpeed/1e3):e.left=parseInt(s.css("left"))+100*t+"px",s.animate(e,i.animationSpeed,function(){x()}),h=0}if(m=!0,!1!==i.onLoadStart&&i.onLoadStart(),!r(d.attr("href")))return m=!1,void(!1!==i.onLoadEnd&&i.onLoadEnd());setTimeout(function(){var e={};if(i.selector&&i.selector.includes("=")){var u=i.selector.split("=");e[u[0]]=u[1].replace(/"/g,"")}s=n("<img />").attr(e).attr("src",d.attr("href")).on("load",function(){s.appendTo("body"),v();var e={opacity:1};if(s.css("opacity",0),o)a(s,-100*t+"px",0),setTimeout(function(){a(s,"0px",i.animationSpeed/1e3)},50);else{var u=parseInt(s.css("left"));e.left=u+"px",s.css("left",u-100*t+"px")}if(s.animate(e,i.animationSpeed,function(){m=!1,!1!==i.onLoadEnd&&i.onLoadEnd()}),i.preloadNext){var c=l.eq(l.index(d)+1);c.length||(c=l.eq(0)),r(c.attr("href"))&&n("<img />").attr("src",c.attr("href"))}}).on("error",function(){!1!==i.onLoadEnd&&i.onLoadEnd()});var p=0,x=0,S=0;s.on(c?"pointerup MSPointerUp":"click",function(n){if(n.preventDefault(),i.quitOnImgClick)return L(),!1;if(f(n.originalEvent))return!0;var t=(n.pageX||n.originalEvent.pageX)-n.target.offsetLeft;(d=l.eq(l.index(d)-(g/2>t?1:-1))).length||(d=l.eq(g/2>t?l.length:0)),E(g/2>t?"left":"right")}).on("touchstart pointerdown MSPointerDown",function(n){if(!f(n.originalEvent)||i.quitOnImgClick)return!0;o&&(S=parseInt(s.css("left"))),p=n.originalEvent.pageX||n.originalEvent.touches[0].pageX}).on("touchmove pointermove MSPointerMove",function(n){if(!f(n.originalEvent)||i.quitOnImgClick)return!0;n.preventDefault(),x=n.originalEvent.pageX||n.originalEvent.touches[0].pageX,h=p-x,o?a(s,-h+"px",0):s.css("left",S-h+"px")}).on("touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",function(n){if(!f(n.originalEvent)||i.quitOnImgClick)return!0;Math.abs(h)>50?((d=l.eq(l.index(d)-(h<0?1:-1))).length||(d=l.eq(h<0?l.length:0)),E(h>0?"right":"left")):o?a(s,"0px",i.animationSpeed/1e3):s.animate({left:S+"px"},i.animationSpeed/2)})},i.animationSpeed+100)},x=function(){if(!s.length)return!1;s.remove(),s=n()},L=function(){if(!s.length)return!1;s.animate({opacity:0},i.animationSpeed,function(){x(),m=!1,!1!==i.onEnd&&i.onEnd()})},S=function(t){t.each(function(){l=l.add(n(this))}),t.on("click.imageLightbox",function(t){if(t.preventDefault(),m)return!1;m=!1,!1!==i.onStart&&i.onStart(),d=n(this),E()})};return n(t).on("resize",v),i.quitOnDocClick&&n(e).on(u?"touchend":"click",function(t){s.length&&!n(t.target).is(s)&&L()}),i.enableKeyboard&&n(e).on("keyup",function(n){if(!s.length)return!0;n.preventDefault(),27==n.keyCode&&L(),37!=n.keyCode&&39!=n.keyCode||((d=l.eq(l.index(d)-(37==n.keyCode?1:-1))).length||(d=l.eq(37==n.keyCode?l.length:0)),E(37==n.keyCode?"left":"right"))}),S(n(this)),this.switchImageLightbox=function(n){var t=l.eq(n);if(t.length){var e=l.index(d);d=t,E(n<e?"left":"right")}return this},this.addToImageLightbox=function(n){S(n)},this.quitImageLightbox=function(){return L(),this},this}}(jQuery,window,document);